!function(){try{let t={init:()=>{t.verifyToken(),t.applyMaskCPF(),t.buttonsConfigs()},windowOnload:()=>{},ajaxStop:()=>{},dataToken:{},verifyToken:()=>{if($.cookie("dagInterplayersToken")){var o=$.cookie("dagInterplayersToken_expiration"),o=new Date(o),e=new Date;if(e<o)return console.log("Token Existe!"),console.log(e),void console.log(o);console.log("Limpando coockie."),$.removeCookie("dagInterplayersToken"),$.removeCookie("dagInterplayersToken_expiration")}t.getToken()},getToken:()=>{$.ajax({type:"POST",url:"https://api-mng.interplayers.com.br/gip-scs-svc/token",data:{Client_Id:"36C0ED06-5F33-448C-96E4-A5AE1AAD3142",Client_Secret:"VP2TQfEL#mF3!rsW",Grant_Type:"client_credentials"}}).done(function(o){console.log("Novo Token!"),t.dataToken=o;let e=t.dateConverterToBrazilTimezone();$.cookie("dagInterplayersToken",o.access_token,{expires:1}),$.cookie("dagInterplayersToken_expiration",e.toString(),{expires:1})})},dateConverterToBrazilTimezone:()=>{let o=new Date;var e=(o=new Date(o.getTime()+18e5)).getFullYear().toString()+"-";return(e=(e=(e=(e+=(o.getMonth()+1).toString().padStart(2,"0")+"-")+(o.getDate().toString().padStart(2,"0")+"T"))+(o.getHours().toString().padStart(2,"0")+":"))+(o.getMinutes().toString().padStart(2,"0")+":"))+o.getSeconds().toString().padStart(2,"0")},applyMaskCPF:()=>{$(".block-btn-promotion.input-cpf input").mask("000.000.000-00",{reverse:!0})},buttonsConfigs:()=>{let o=$(".block-btn-promotion.info-discount"),e=$(".dag-storefront-pbm-btn-add"),t=$(".dag-storefront-pbm-btn-remove"),n=$(".dag-storefront.pbm-block .box-terms-btn-close");o.on("click",function(o){o.preventDefault();let e=$(this);e.removeClass("active-info-discount"),e.siblings(".block-btn-promotion.input-cpf").addClass("active-input-cpf")}),e.on("click",function(o){o.preventDefault();let e=$(this);if(e.prev().val().length<14)alert("Numero de CPF incompleto.");else{let o=e.closest(".dag-storefront.main");o.addClass("pbm-loader-on"),o.find(".dag-storefront.content").removeClass("content-on"),o.find(".dag-storefront.discount-loader").addClass("active-loader-pbm"),setTimeout(function(){o.find(".pbm-block.box-terms-register").addClass("active-box-terms-register"),o.find(".block-btn-promotion.input-cpf").removeClass("active-input-cpf"),o.find(".dag-storefront.discount-loader").removeClass("active-loader-pbm"),o.removeClass("pbm-loader-on"),o.find(".dag-storefront.content").addClass("content-on")},2e3)}}),t.on("click",function(o){o.preventDefault();let e=$(this).closest(".dag-storefront.main");e.addClass("pbm-loader-on"),e.find(".dag-storefront.content").hide(),e.find(".dag-storefront.discount-loader").addClass("active-loader-pbm"),setTimeout(function(){e.find(".block-btn-promotion.discount-applied").removeClass("active-discount-applied"),e.find(".block-btn-promotion.info-discount").addClass("active-info-discount"),e.removeClass("pbm-loader-on"),e.find(".dag-storefront.discount-loader").removeClass("active-loader-pbm"),e.find(".dag-storefront.content").show()},2e3)}),n.on("click",function(o){o.preventDefault();let e=$(this).closest(".dag-storefront.pbm-block");e.find(".box-terms-register, .box-term-autorize").removeClass("active-box-terms-register active-box-terms-autorize"),e.find(".block-btn-promotion.info-discount").addClass("active-info-discount")})}};$(document).ready(t.init);$(window).load(function(){t.windowOnload()}),$(document).ajaxStop(t.ajaxStop)}catch(o){console.log("Erro na instÃ¢ncia do [PBMstorefront]: ",o)}}();