!function(){try{let i={init:()=>{i.applyValidate(),i.getOrderForm()},windowOnload:()=>{},ajaxStop:()=>{},getOrderForm:()=>{if(localStorage.getItem("dagUserForm")){var e=JSON.parse(localStorage.getItem("dagUserForm"));for(field in e)""!=e[field]&&null!=e[field]&&($(`input[name="${field}"]`).val(e[field]),"genre"==field&&$('select[name="genre"]').val(e[field]))}},applyValidate:()=>{let n=$("#dag-form-program-register");i.setValidateConfigs(n),n.on("submit",async function(l){if(l.preventDefault(),l.stopPropagation(),localStorage.getItem("dagCentralNumber")){if(swal({icon:"https://drogariaglobo.vteximg.com.br/arquivos/drogariaglobo-loading-modal.gif",title:"Consultando...",text:"Por favor não saia ou recarregue a página",allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,showCloseButton:!1,showCancelButton:!1,buttons:!1,closeOnClickOutside:!1,didOpen:()=>{Swal.showLoading()}}),n[0].checkValidity()){console.log("Formulario validado com sucesso.");let e=n.serializeObject(),o={cardId:"",cardIdCompany:null,idCompany:null,cardIdOperator:null,idOperator:null,acceptTerm:"S"},a=((e={...e,...o}).consumer.holderId=e.consumer.holderId.replace(/[^\w\s]/g,""),i.formatBooleanInputsValues(e),localStorage.setItem("dagUserForm",JSON.stringify(e)),e.email,e.holderId,JSON.parse(localStorage.getItem("dagCurrentProductPBM"))),r={type:e.tiporegistro,id:e.numeroregistroconselho,stateCode:e.estadoregistro,name:e.nomeprofissional},t={currentCentralNumber:localStorage.getItem("dagCentralNumber"),consumer:e,product:[a],healthProfessional:r,token:$.cookie("dagInterplayersToken")};delete t.consumer.tiporegistro,delete t.consumer.nomeprofissional,delete t.consumer.numeroregistroconselho,delete t.consumer.estadoregistro,console.log("DADOS"),console.log(t),console.log("\nANTES DA REQUEST\n");l=await i.sendDataInterplayers(t);l.process&&l.process.error&&l.process.error[0]&&l.process.error[0].returnCode?i.showErrorMessages(l.process.error[0]):(console.log("\nPÓS REQUEST"),console.log(l),swal({title:"Ativação feita com sucesso!",text:"Agora você pode visualizar os descontos dos produtos.",icon:"success",closeOnClickOutside:!1}).then(()=>{window.location.pathname="/"}))}}else alert("Central number não localizado, volte de aceite nos termos.")})},setValidateConfigs:e=>{e.validate({rules:{holderId:{required:!0},birthdate:{required:!0},name:{required:!0},genre:{required:!0},postalCode:{required:!0},stateCode:{required:!0},cityName:{required:!0},streetAddress:{required:!0},addressNumber:{required:!0},cellphone:{required:!0},phone:{required:!0},email:{required:!0},cityRegion:{required:!0},addressType:{required:!0}}})},sendDataToMD:e=>{e={type:"POST",url:"/api/dataentities/FU/documents",headers:{"Content-Type":"application/json",Accept:"application/vnd.vtex.ds.v10+json"},data:JSON.stringify(e)};return $.ajax(e)},sendDataInterplayers:e=>{e={type:"POST",url:"https://drogariaglobo-middleware.herokuapp.com/dagmiddleware/active-customer",headers:{"Content-Type":"application/json",Accept:"application/vnd.vtex.ds.v10+json"},data:JSON.stringify(e)};return $.ajax(e)},formatBooleanInputsValues:e=>{"on"==e.acceptEmail?e.acceptEmail="S":e.acceptEmail="N","on"==e.acceptSMS?e.acceptSMS="S":e.acceptSMS="N","on"==e.acceptCalls?e.acceptCalls="S":e.acceptCalls="N","on"==e.acceptInformativeMaterial?e.acceptInformativeMaterial="S":e.acceptInformativeMaterial="N","on"==e.acceptMail?e.acceptMail="S":e.acceptMail="N"},showErrorMessages:e=>{"TD14"==e.returnCode?swal({title:"Atenção",text:"E-mail já cadastrado para outro usuário do programa, tente outro e-mail.",icon:"warning",closeOnClickOutside:!1}).then(()=>{$("#inputEmail").val()}):"Q285"==e.returnCode&&swal({title:"Atenção",text:"Número da central não localizado é necessario voce aceitar os termos.",icon:"warning",closeOnClickOutside:!1})}};$(document).ready(i.init);$(window).load(function(){i.windowOnload()}),$(document).ajaxStop(i.ajaxStop)}catch(e){console.log("Erro na instância do [Register]: ",e)}}();